<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>WoW Classic / TBC ‚Äì Schandtatenliste</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&display=swap" rel="stylesheet">
<style>
body{
  margin:0;
  font-family:'Cinzel',serif;
  color:#f5e6c8;
  background:url('https://bnetcmsus-a.akamaihd.net/cms/blog_header/15/154R55EBRA3S1763416975589.png') no-repeat center center fixed;
  background-size:cover;
}
.container{
  max-width:900px;
  margin:20px auto;
  padding:25px;
  background:linear-gradient(145deg, rgba(15,10,5,0.95), rgba(25,18,10,0.92));
  border:4px solid #c9a44c;
  border-image:linear-gradient(45deg, #c9a44c, #ffd36a, #c9a44c) 1;
  border-radius:18px;
  box-shadow:0 0 40px rgba(201,164,76,0.5), inset 0 0 20px rgba(0,0,0,0.8);
  position:relative;
}
.container::before{
  content:'';
  position:absolute;
  top:-10px; left:-10px; right:-10px; bottom:-10px;
  background:linear-gradient(45deg, transparent 49%, rgba(201,164,76,0.15) 50%, transparent 51%);
  border-radius:25px;
  z-index:-1;
}
h1{
  text-align:center;
  color:#ffd36a;
  text-shadow:0 0 20px rgba(255,211,106,0.9), 2px 2px 6px rgba(0,0,0,1);
  font-size:2.4em;
  margin:0 0 30px 0;
  letter-spacing:4px;
  position:relative;
}
h1::after{
  content:'Schande den Feigen!';
  display:block;
  font-size:0.5em;
  color:#d4af37;
  letter-spacing:2px;
  margin-top:8px;
  opacity:0.8;
}
input,select{
  padding:12px 16px;
  background:linear-gradient(145deg, #2a1f12, #1a1208);
  border:2px solid #8c6a32;
  color:#f5e6c8;
  border-radius:10px;
  font-family:inherit;
  font-size:14px;
  box-shadow:inset 0 3px 6px rgba(0,0,0,0.7);
  text-shadow:1px 1px 2px rgba(0,0,0,0.9);
  transition:all 0.3s ease;
}
input:focus,select:focus{
  outline:none;
  border-color:#ffd36a;
  box-shadow:0 0 15px rgba(255,211,106,0.6), inset 0 1px 0 rgba(255,255,255,0.2);
}
button{
  cursor:pointer;
  font-family:'Cinzel',serif;
  font-weight:700;
  position:relative;
  overflow:hidden;
  transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
  text-transform:uppercase;
  letter-spacing:1.5px;
}
button::before{
  content:'';
  position:absolute;
  top:0; left:-100%;
  width:100%; height:100%;
  background:linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
  transition:left 0.6s;
}
button:hover::before{left:100%;}
button:hover{transform:translateY(-3px) scale(1.02);}
.btn-wow{
  background:linear-gradient(145deg, #d4af37, #b8942f, #8c6a32);
  color:#1a0f06;
  border:3px solid #ffd36a;
  border-radius:12px;
  padding:10px 20px;
  font-size:13px;
  box-shadow:0 6px 20px rgba(212,175,55,0.5), inset 0 2px 0 rgba(255,255,255,0.4);
  text-shadow:0 1px 2px rgba(255,255,255,0.6);
  min-width:140px;
}
.btn-wow:hover{
  background:linear-gradient(145deg, #ffd36a, #e0b75a, #c9a44c);
  box-shadow:0 10px 25px rgba(212,175,55,0.7);
  border-color:#ffeb8a;
}
.btn-action{
  width:32px; height:32px;
  padding:0;
  border-radius:8px;
  font-size:14px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(145deg, #c79c6e, #a87d4e);
  border:3px solid #d4af37;
  color:#2a1f12;
  box-shadow:0 4px 15px rgba(199,156,110,0.5);
  transition:all 0.2s ease;
}
.btn-action:hover{
  background:linear-gradient(145deg, #d4af37, #c79c6e);
  box-shadow:0 7px 20px rgba(199,156,110,0.7);
  transform:scale(1.1);
}
#loginPanel{
  max-width:500px;
  margin:0 auto 35px;
  padding:35px;
  background:linear-gradient(145deg, #1f150d, #120a06);
  border:4px solid #8c6a32;
  border-radius:20px;
  box-shadow:0 12px 35px rgba(0,0,0,0.9), inset 0 2px 0 rgba(255,255,255,0.15);
  text-align:center;
}
.form,.filters{
  display:flex;
  flex-wrap:wrap;
  gap:15px;
  margin-bottom:20px;
  padding:20px;
  background:rgba(26,18,8,0.5);
  border-radius:15px;
  border:2px solid rgba(140,106,50,0.4);
  box-shadow:inset 0 2px 4px rgba(0,0,0,0.5);
}
.form-full{width:100%;}
#crime{flex:1;min-width:100%;}
.form-buttons{
  display:flex;
  justify-content:center;
  gap:20px;
  margin-top:20px;
}
#list{
  margin-top:30px;
  display:block;
}
.entry{
  display:flex;
  flex-direction:column;
  width:100%;
  max-width:850px;
  margin:0 auto 22px auto;
  background:linear-gradient(145deg, #2a1f12, #1a1208, #120a06);
  border:4px solid #8c6a32;
  border-left:12px solid;
  border-radius:20px;
  padding:22px;
  box-shadow:0 12px 35px rgba(0,0,0,0.9), inset 0 2px 0 rgba(255,255,255,0.08);
  position:relative;
  transition:all 0.4s cubic-bezier(0.4,0,0.2,1);
  word-wrap:break-word;
  hyphens:auto;
}
.entry::before{
  content:'';
  position:absolute;
  top:0; left:0; right:0;
  height:6px;
  background:linear-gradient(90deg, transparent, #ffd36a, #d4af37, #ffd36a, transparent);
  border-radius:20px 20px 0 0;
  box-shadow:0 2px 8px rgba(255,211,106,0.4);
}
.entry:hover{
  transform:translateY(-8px) scale(1.01);
  box-shadow:0 20px 45px rgba(201,164,76,0.4), inset 0 2px 0 rgba(255,255,255,0.12);
}
.entry-top{
  display:flex;
  align-items:flex-start;
  gap:18px;
}
.icon-row{
  display:flex;
  gap:8px;
}
.icon{
  width:42px;
  height:42px;
  background-size:cover;
  background-position:center;
  border:4px solid #c9a44c;
  border-radius:10px;
  box-shadow:0 5px 15px rgba(0,0,0,0.7);
  position:relative;
}
.icon::after{
  content:'';
  position:absolute;
  bottom:-4px; right:-4px;
  width:14px; height:14px;
  background:#ffd36a;
  border-radius:50%;
  box-shadow:0 3px 8px rgba(0,0,0,0.5);
}
.entry-body{
  flex:1;
  color:#f5e6c8;
  margin-left:15px;
  min-width:0;
}
.entry-name{
  font-weight:800;
  font-size:18px;
  color:#ffd36a;
  text-shadow:2px 2px 4px rgba(0,0,0,1);
  margin-bottom:6px;
  letter-spacing:1px;
}
.entry-info{
  font-size:13px;
  color:#d4af37;
  margin-bottom:10px;
  text-shadow:1px 1px 3px rgba(0,0,0,0.9);
  font-weight:500;
}
.entry-crime{
  font-size:14px;
  line-height:1.5;
  color:#f0e6d2;
  padding:12px 0;
  border-left:4px solid rgba(140,106,50,0.6);
  padding-left:18px;
  background:rgba(255,255,255,0.03);
  border-radius:8px;
  word-wrap:break-word;
}
.voteBox{
  display:flex;
  align-items:center;
  gap:8px;
  position:absolute;
  top:15px;
  right:20px;
  background:linear-gradient(145deg, rgba(26,18,8,0.95), rgba(15,10,5,0.95));
  padding:12px 16px;
  border-radius:15px;
  border:3px solid #6b4e31;
  box-shadow:0 6px 20px rgba(0,0,0,0.8);
}
.voteBtn{
  font-size:22px;
  cursor:pointer;
  opacity:0.8;
  transition:all 0.25s ease;
  padding:6px;
  border-radius:10px;
  transition:transform 0.1s ease;
}
.voteBtn:hover{
  transform:scale(1.25);
  opacity:1;
  background:rgba(255,255,255,0.15);
  box-shadow:0 4px 12px rgba(0,0,0,0.5);
}
.voteBtn:active{
  transform:scale(0.95);
}
.voteCount{
  min-width:26px;
  text-align:center;
  font-size:15px;
  font-weight:700;
  color:#ffd36a;
  text-shadow:1px 1px 2px rgba(0,0,0,1);
}
.entry-actions{
  display:flex;
  justify-content:flex-end;
  gap:10px;
  margin-top:15px;
  padding-top:15px;
  border-top:3px solid rgba(140,106,50,0.5);
  background:rgba(255,255,255,0.02);
  border-radius:0 0 12px 12px;
}
#adminPanel{
  margin-top:30px;
  background:linear-gradient(145deg, #2a1f12, #1a1208);
  padding:22px;
  border-radius:16px;
  border:4px solid #8c6a32;
  box-shadow:0 12px 35px rgba(0,0,0,0.9);
  display:none;
}
.adminUser{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:12px;
  padding:15px;
  background:rgba(41,31,18,0.7);
  border-radius:12px;
  border-left:6px solid #c9a44c;
  box-shadow:0 4px 15px rgba(0,0,0,0.5);
}
#updateHistory{
  margin-top:30px;
  background:linear-gradient(145deg, #1f150d, #120a06);
  padding:22px;
  border-radius:16px;
  border:4px solid #6b4e31;
  max-height:250px;
  overflow-y:auto;
  font-size:13px;
  box-shadow:0 12px 35px rgba(0,0,0,0.9);
}
#updateHistory::-webkit-scrollbar{
  width:10px;
}
#updateHistory::-webkit-scrollbar-track{
  background:rgba(26,18,8,0.5);
  border-radius:5px;
}
#updateHistory::-webkit-scrollbar-thumb{
  background:linear-gradient(#c9a44c, #ffd36a);
  border-radius:5px;
}
#updateHistory div{
  padding:8px 0;
  border-bottom:1px solid rgba(140,106,50,0.3);
}
#updateHistory strong{
  color:#ffd36a;
  text-shadow:1px 1px 2px rgba(0,0,0,1);
}
</style>
</head>
<body>
<div class="container">
  <h1>WoW Classic / TBC ‚Äì Schandtatenliste</h1>

  <div id="loginPanel">
    <input type="email" id="email" placeholder="Email-Adresse"><br><br>
    <input type="password" id="password" placeholder="Passwort"><br><br>
    <button id="registerBtn" class="btn-wow">In die Reihen</button>
    <button id="loginBtn" class="btn-wow">Kampf beitreten</button>
  </div>

  <div id="mainContent" style="display:none;">
    <div class="filters">
      <input id="search" placeholder="Suche nach Namen oder Schandtaten...">
      <select id="filterRace">
        <option value="">üè∞ Alle Rassen</option>
        <option>Mensch</option><option>Zwerg</option><option>Nachtelf</option>
        <option>Gnom</option><option>Draenei</option>
        <option>Ork</option><option>Troll</option><option>Tauren</option>
        <option>Untoter</option><option>Blutelf</option>
      </select>
      <select id="filterClass">
        <option value="">‚öîÔ∏è Alle Klassen</option>
        <option>Krieger</option><option>Paladin</option><option>J√§ger</option>
        <option>Schurke</option><option>Priester</option>
        <option>Schamane</option><option>Magier</option>
        <option>Hexenmeister</option><option>Druide</option>
      </select>
    </div>

    <div class="form">
      <input id="name" placeholder="Name des Sch√§nders">
      <select id="race">
        <option value="">Rasse w√§hlen</option>
        <option>Mensch</option><option>Zwerg</option><option>Nachtelf</option>
        <option>Gnom</option><option>Draenei</option>
        <option>Ork</option><option>Troll</option><option>Tauren</option>
        <option>Untoter</option><option>Blutelf</option>
      </select>
      <select id="wowClass">
        <option value="">Klasse w√§hlen</option>
        <option>Krieger</option><option>Paladin</option><option>J√§ger</option>
        <option>Schurke</option><option>Priester</option>
        <option>Schamane</option><option>Magier</option>
        <option>Hexenmeister</option><option>Druide</option>
      </select>
    </div>
    <div class="form-full">
      <input id="crime" placeholder="Die Schandtat beschreiben...">
    </div>
    <div class="form-buttons">
      <button id="addBtn" class="btn-wow">Schandtat melden</button>
      <button id="logoutBtn" class="btn-wow">R√ºckzug</button>
    </div>

    <div id="list"></div>

    <div id="adminPanel">
      <h3 style="color:#ffd36a;margin:0 0 20px 0;text-shadow:2px 2px 4px black;">‚õ® Hochrangige Rekruten freischalten</h3>
      <div id="pendingList"></div>
    </div>

    <div id="updateHistory">
      <strong>üìú Schlachtchronik:</strong>
    </div>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
import { getFirestore, collection, addDoc, query, orderBy, onSnapshot, serverTimestamp, doc, getDoc, getDocs, updateDoc, deleteDoc, setDoc, increment } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey:"AIzaSyBOko8Wg-jCvz7aRPleNcbJCm8u2CYtjps",
  authDomain:"wow-hs-liste.firebaseapp.com",
  projectId:"wow-hs-liste",
